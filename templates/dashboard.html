{% extends "base.html" %} {% block title %}Dashboard - BirdTag{% endblock %} {%
block content %}
<div class="max-w-7xl mx-auto px-6 py-8">
  <!-- Welcome Header -->
  <div class="mb-8">
    <div class="flex flex-col md:flex-row md:items-center md:justify-between">
      <div class="mb-4 md:mb-0">
        <h1 class="text-3xl md:text-4xl font-bold text-gray-900 mb-2">
          Welcome back, {{ session.user.given_name or 'Researcher' }}!
          <span class="inline-block animate-float">üê¶</span>
        </h1>
        <p class="text-gray-600 text-lg">
          Ready to explore and organize your bird media collection?
        </p>
      </div>
      <div class="hidden md:block">
        <div class="bird-gradient p-4 rounded-2xl shadow-lg animate-float">
          <i data-lucide="bird" class="w-10 h-10 text-white"></i>
        </div>
      </div>
    </div>
  </div>

  <!-- Stats Overview -->
  <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
    <!-- Total Files Card -->
    <div
      class="glass-effect rounded-xl p-6 hover:shadow-lg transition-all duration-300 transform hover:scale-105"
    >
      <div class="flex items-center justify-between">
        <div>
          <p class="text-gray-600 text-sm font-medium uppercase tracking-wide">
            Total Files
          </p>
          <p class="text-3xl font-bold text-gray-900 mt-1">247</p>
          <div class="mt-3 flex items-center text-sm">
            <span class="text-green-600 font-semibold">+12</span>
            <span class="text-gray-500 ml-1">this week</span>
          </div>
        </div>
        <div
          class="w-14 h-14 bg-gradient-to-br from-bird-100 to-bird-200 rounded-xl flex items-center justify-center"
        >
          <i data-lucide="image" class="w-7 h-7 text-bird-600"></i>
        </div>
      </div>
    </div>

    <!-- Species Detected Card -->
    <div
      class="glass-effect rounded-xl p-6 hover:shadow-lg transition-all duration-300 transform hover:scale-105"
    >
      <div class="flex items-center justify-between">
        <div>
          <p class="text-gray-600 text-sm font-medium uppercase tracking-wide">
            Species Detected
          </p>
          <p class="text-3xl font-bold text-gray-900 mt-1">89</p>
          <div class="mt-3 flex items-center text-sm">
            <span class="text-green-600 font-semibold">+3</span>
            <span class="text-gray-500 ml-1">new species</span>
          </div>
        </div>
        <div
          class="w-14 h-14 bg-gradient-to-br from-nature-100 to-nature-200 rounded-xl flex items-center justify-center"
        >
          <i data-lucide="eye" class="w-7 h-7 text-nature-600"></i>
        </div>
      </div>
    </div>

    <!-- Storage Used Card -->
    <div
      class="glass-effect rounded-xl p-6 hover:shadow-lg transition-all duration-300 transform hover:scale-105"
    >
      <div class="flex items-center justify-between">
        <div>
          <p class="text-gray-600 text-sm font-medium uppercase tracking-wide">
            Storage Used
          </p>
          <p class="text-3xl font-bold text-gray-900 mt-1">2.4GB</p>
          <div class="mt-3 flex items-center text-sm">
            <span class="text-gray-500">of 10GB limit</span>
          </div>
        </div>
        <div
          class="w-14 h-14 bg-gradient-to-br from-purple-100 to-purple-200 rounded-xl flex items-center justify-center"
        >
          <i data-lucide="hard-drive" class="w-7 h-7 text-purple-600"></i>
        </div>
      </div>
    </div>

    <!-- Recent Activity Card -->
    <div
      class="glass-effect rounded-xl p-6 hover:shadow-lg transition-all duration-300 transform hover:scale-105"
    >
      <div class="flex items-center justify-between">
        <div>
          <p class="text-gray-600 text-sm font-medium uppercase tracking-wide">
            Status
          </p>
          <p class="text-3xl font-bold text-gray-900 mt-1">Active</p>
          <div class="mt-3 flex items-center text-sm">
            <div
              class="w-2 h-2 bg-green-500 rounded-full animate-pulse mr-2"
            ></div>
            <span class="text-green-600 font-semibold">Online now</span>
          </div>
        </div>
        <div
          class="w-14 h-14 bg-gradient-to-br from-green-100 to-green-200 rounded-xl flex items-center justify-center"
        >
          <i data-lucide="activity" class="w-7 h-7 text-green-600"></i>
        </div>
      </div>
    </div>
  </div>

  <!-- Main Content Area -->
  <div class="grid grid-cols-1 xl:grid-cols-4 gap-8">
    <!-- Left Sidebar - Profile & Actions -->
    <div class="xl:col-span-1 space-y-6">
      <!-- User Profile Card -->
      <div class="glass-effect rounded-xl p-6">
        <div class="text-center">
          <div class="relative inline-block">
            <div
              class="w-20 h-20 bg-gradient-to-r from-bird-400 to-bird-600 rounded-full mx-auto mb-4 flex items-center justify-center shadow-lg"
            >
              <span class="text-white text-2xl font-bold">
                {{ session.user.given_name[0] if session.user.given_name else
                session.user.email[0] }}
              </span>
            </div>
            <div
              class="absolute -bottom-1 -right-1 w-6 h-6 bg-green-500 rounded-full border-2 border-white"
            ></div>
          </div>

          <h3 class="text-lg font-semibold text-gray-900">
            {{ session.user.given_name }} {{ session.user.family_name }}
          </h3>
          <p class="text-gray-600 text-sm">{{ session.user.email }}</p>
          <div
            class="mt-2 inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-bird-100 text-bird-700"
          >
            <i data-lucide="graduation-cap" class="w-3 h-3 mr-1"></i>
            Bird Research Specialist
          </div>
        </div>

        <div class="mt-6 space-y-3">
          <div class="flex items-center justify-between text-sm">
            <span class="text-gray-600">Specialized Species:</span>
            <span class="font-medium text-gray-900 text-right"
              >Raptors, Songbirds</span
            >
          </div>
          <div class="flex items-center justify-between text-sm">
            <span class="text-gray-600">Role:</span>
            <span class="font-medium text-gray-900">Student Researcher</span>
          </div>
          <div class="flex items-center justify-between text-sm">
            <span class="text-gray-600">Institute:</span>
            <span class="font-medium text-gray-900 text-right"
              >Monash University</span
            >
          </div>
        </div>

        <div class="mt-6">
          <a
            href="{{ url_for('profile') }}"
            class="w-full bg-gray-100 hover:bg-gray-200 text-gray-700 py-3 px-4 rounded-lg transition-colors duration-200 flex items-center justify-center space-x-2"
          >
            <i data-lucide="user" class="w-4 h-4"></i>
            <span>View Profile</span>
          </a>
        </div>
      </div>

      <!-- Quick Actions -->
      <div class="glass-effect rounded-xl p-6">
        <h3 class="text-lg font-semibold text-gray-900 mb-4 flex items-center">
          <i data-lucide="zap" class="w-5 h-5 mr-2 text-bird-600"></i>
          Quick Actions
        </h3>
        <div class="space-y-3">
          <a
            href="{{ url_for('upload') }}"
            class="w-full bird-gradient text-white py-3 px-4 rounded-lg hover:opacity-90 transition-all duration-200 flex items-center space-x-3 shadow-md"
          >
            <i data-lucide="upload" class="w-5 h-5"></i>
            <span>Upload New Media</span>
          </a>
          <a
            href="{{ url_for('search') }}"
            class="w-full bg-gray-100 hover:bg-gray-200 text-gray-700 py-3 px-4 rounded-lg transition-colors duration-200 flex items-center space-x-3"
          >
            <i data-lucide="search" class="w-5 h-5"></i>
            <span>Search Collection</span>
          </a>
          <a
            href="{{ url_for('subscribe') }}"
            class="w-full bg-gray-100 hover:bg-gray-200 text-gray-700 py-3 px-4 rounded-lg transition-colors duration-200 flex items-center space-x-3"
          >
            <i data-lucide="bell" class="w-5 h-5"></i>
            <span>Notifications</span>
          </a>
        </div>
      </div>
    </div>

    <!-- Main Content Area -->
    <div class="xl:col-span-3 space-y-6">
      <!-- Recent Uploads -->
      <div class="glass-effect rounded-xl p-6">
        <div class="flex items-center justify-between mb-6">
          <h3 class="text-xl font-semibold text-gray-900 flex items-center">
            <i data-lucide="clock" class="w-6 h-6 mr-3 text-bird-600"></i>
            Recent Uploads
          </h3>
          <a
            href="{{ url_for('search') }}"
            class="text-bird-600 hover:text-bird-700 text-sm font-medium flex items-center space-x-1"
          >
            <span>View All</span>
            <i data-lucide="arrow-right" class="w-4 h-4"></i>
          </a>
        </div>

        <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
          <div class="group cursor-pointer">
            <div
              class="aspect-square bg-gradient-to-br from-bird-100 to-bird-200 rounded-xl mb-3 flex items-center justify-center group-hover:scale-105 transition-transform duration-200 shadow-sm"
            >
              <i data-lucide="image" class="w-10 h-10 text-bird-600"></i>
            </div>
            <p class="text-sm font-medium text-gray-900 truncate">
              Cardinal_2024.jpg
            </p>
            <p class="text-xs text-bird-600 font-medium">2 species detected</p>
            <p class="text-xs text-gray-500">2 hours ago</p>
          </div>

          <div class="group cursor-pointer">
            <div
              class="aspect-square bg-gradient-to-br from-nature-100 to-nature-200 rounded-xl mb-3 flex items-center justify-center group-hover:scale-105 transition-transform duration-200 shadow-sm"
            >
              <i data-lucide="video" class="w-10 h-10 text-nature-600"></i>
            </div>
            <p class="text-sm font-medium text-gray-900 truncate">
              Eagle_hunt.mp4
            </p>
            <p class="text-xs text-nature-600 font-medium">
              1 species detected
            </p>
            <p class="text-xs text-gray-500">5 hours ago</p>
          </div>

          <div class="group cursor-pointer">
            <div
              class="aspect-square bg-gradient-to-br from-purple-100 to-purple-200 rounded-xl mb-3 flex items-center justify-center group-hover:scale-105 transition-transform duration-200 shadow-sm"
            >
              <i data-lucide="music" class="w-10 h-10 text-purple-600"></i>
            </div>
            <p class="text-sm font-medium text-gray-900 truncate">
              Sparrow_call.wav
            </p>
            <p class="text-xs text-purple-600 font-medium">
              1 species detected
            </p>
            <p class="text-xs text-gray-500">1 day ago</p>
          </div>

          <div class="group cursor-pointer">
            <div
              class="aspect-square bg-gradient-to-br from-orange-100 to-orange-200 rounded-xl mb-3 flex items-center justify-center group-hover:scale-105 transition-transform duration-200 shadow-sm"
            >
              <i data-lucide="image" class="w-10 h-10 text-orange-600"></i>
            </div>
            <p class="text-sm font-medium text-gray-900 truncate">
              Robin_nest.jpg
            </p>
            <p class="text-xs text-orange-600 font-medium">
              3 species detected
            </p>
            <p class="text-xs text-gray-500">2 days ago</p>
          </div>
        </div>
      </div>

      <!-- Two Column Layout for Species & Activity -->
      <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
        <!-- Top Species This Month -->
        <div class="glass-effect rounded-xl p-6">
          <div class="flex items-center justify-between mb-6">
            <h3 class="text-lg font-semibold text-gray-900 flex items-center">
              <i
                data-lucide="trending-up"
                class="w-5 h-5 mr-2 text-nature-600"
              ></i>
              Top Species
            </h3>
            <span
              class="text-sm text-gray-500 bg-gray-100 px-2 py-1 rounded-full"
              >March 2025</span
            >
          </div>

          <div class="space-y-4">
            <div
              class="flex items-center justify-between p-3 bg-bird-50 rounded-lg"
            >
              <div class="flex items-center space-x-3">
                <div
                  class="w-8 h-8 bg-bird-600 rounded-full flex items-center justify-center"
                >
                  <span class="text-white font-bold text-sm">1</span>
                </div>
                <div>
                  <p class="font-medium text-gray-900 text-sm">
                    Northern Cardinal
                  </p>
                  <p class="text-xs text-gray-600">Cardinalis cardinalis</p>
                </div>
              </div>
              <div class="text-right">
                <p class="font-bold text-bird-600 text-sm">47</p>
                <p class="text-xs text-gray-500">‚Üë 23%</p>
              </div>
            </div>

            <div
              class="flex items-center justify-between p-3 bg-nature-50 rounded-lg"
            >
              <div class="flex items-center space-x-3">
                <div
                  class="w-8 h-8 bg-nature-600 rounded-full flex items-center justify-center"
                >
                  <span class="text-white font-bold text-sm">2</span>
                </div>
                <div>
                  <p class="font-medium text-gray-900 text-sm">
                    American Robin
                  </p>
                  <p class="text-xs text-gray-600">Turdus migratorius</p>
                </div>
              </div>
              <div class="text-right">
                <p class="font-bold text-nature-600 text-sm">32</p>
                <p class="text-xs text-gray-500">‚Üë 15%</p>
              </div>
            </div>

            <div
              class="flex items-center justify-between p-3 bg-purple-50 rounded-lg"
            >
              <div class="flex items-center space-x-3">
                <div
                  class="w-8 h-8 bg-purple-600 rounded-full flex items-center justify-center"
                >
                  <span class="text-white font-bold text-sm">3</span>
                </div>
                <div>
                  <p class="font-medium text-gray-900 text-sm">Blue Jay</p>
                  <p class="text-xs text-gray-600">Cyanocitta cristata</p>
                </div>
              </div>
              <div class="text-right">
                <p class="font-bold text-purple-600 text-sm">28</p>
                <p class="text-xs text-gray-500">‚Üì 5%</p>
              </div>
            </div>
          </div>
        </div>

        <!-- Recent Activity Feed -->
        <div class="glass-effect rounded-xl p-6">
          <div class="flex items-center justify-between mb-6">
            <h3 class="text-lg font-semibold text-gray-900 flex items-center">
              <i data-lucide="activity" class="w-5 h-5 mr-2 text-bird-600"></i>
              Recent Activity
            </h3>
            <a
              href="{{ url_for('feed') }}"
              class="text-bird-600 hover:text-bird-700 text-sm font-medium flex items-center space-x-1"
            >
              <span>View Feed</span>
              <i data-lucide="arrow-right" class="w-4 h-4"></i>
            </a>
          </div>

          <div class="space-y-4">
            <div
              class="flex items-start space-x-3 p-3 hover:bg-gray-50 rounded-lg transition-colors duration-200"
            >
              <div
                class="w-8 h-8 bg-green-100 rounded-full flex items-center justify-center flex-shrink-0"
              >
                <i data-lucide="upload" class="w-4 h-4 text-green-600"></i>
              </div>
              <div class="flex-1 min-w-0">
                <p class="text-sm text-gray-900">
                  You uploaded
                  <span class="font-medium">Cardinal_morning.jpg</span>
                </p>
                <p class="text-xs text-gray-500">
                  2 hours ago ‚Ä¢ AI detected: Northern Cardinal
                </p>
              </div>
            </div>

            <div
              class="flex items-start space-x-3 p-3 hover:bg-gray-50 rounded-lg transition-colors duration-200"
            >
              <div
                class="w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0"
              >
                <i data-lucide="eye" class="w-4 h-4 text-blue-600"></i>
              </div>
              <div class="flex-1 min-w-0">
                <p class="text-sm text-gray-900">
                  AI analysis completed for
                  <span class="font-medium">Eagle_flight.mp4</span>
                </p>
                <p class="text-xs text-gray-500">
                  5 hours ago ‚Ä¢ Species: Bald Eagle
                </p>
              </div>
            </div>

            <div
              class="flex items-start space-x-3 p-3 hover:bg-gray-50 rounded-lg transition-colors duration-200"
            >
              <div
                class="w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center flex-shrink-0"
              >
                <i data-lucide="bell" class="w-4 h-4 text-purple-600"></i>
              </div>
              <div class="flex-1 min-w-0">
                <p class="text-sm text-gray-900">
                  New notification preferences saved
                </p>
                <p class="text-xs text-gray-500">
                  Yesterday ‚Ä¢ Subscribed to Raptor updates
                </p>
              </div>
            </div>

            <div
              class="flex items-start space-x-3 p-3 hover:bg-gray-50 rounded-lg transition-colors duration-200"
            >
              <div
                class="w-8 h-8 bg-orange-100 rounded-full flex items-center justify-center flex-shrink-0"
              >
                <i data-lucide="users" class="w-4 h-4 text-orange-600"></i>
              </div>
              <div class="flex-1 min-w-0">
                <p class="text-sm text-gray-900">
                  Dr. Sarah Chen shared research data
                </p>
                <p class="text-xs text-gray-500">
                  2 days ago ‚Ä¢ Migratory patterns study
                </p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Mobile Floating Action Buttons -->
  <div class="fixed bottom-6 right-6 xl:hidden">
    <div class="flex flex-col space-y-3">
      <a
        href="{{ url_for('upload') }}"
        class="w-14 h-14 bird-gradient rounded-full flex items-center justify-center shadow-lg hover:shadow-xl transition-all duration-200 transform hover:scale-110"
      >
        <i data-lucide="upload" class="w-6 h-6 text-white"></i>
      </a>
      <a
        href="{{ url_for('search') }}"
        class="w-12 h-12 bg-white border border-gray-200 rounded-full flex items-center justify-center shadow-lg hover:shadow-xl transition-all duration-200 transform hover:scale-110"
      >
        <i data-lucide="search" class="w-5 h-5 text-gray-600"></i>
      </a>
    </div>
  </div>
</div>

<script>
  // Initialize dashboard with enhanced animations
  document.addEventListener("DOMContentLoaded", function () {
    // Animate stats cards on load
    const statsCards = document.querySelectorAll(".glass-effect");
    statsCards.forEach((card, index) => {
      setTimeout(() => {
        card.style.opacity = "0";
        card.style.transform = "translateY(20px)";
        card.style.transition = "all 0.5s ease-out";

        setTimeout(() => {
          card.style.opacity = "1";
          card.style.transform = "translateY(0)";
        }, 50);
      }, index * 100);
    });

    // Update activity time periodically
    updateActivityTime();
    setInterval(updateActivityTime, 60000); // Update every minute

    // Add hover effects to upload items
    const uploadItems = document.querySelectorAll(".group");
    uploadItems.forEach((item) => {
      item.addEventListener("mouseenter", function () {
        this.style.transform = "translateY(-2px)";
        this.style.transition = "transform 0.2s ease-out";
      });

      item.addEventListener("mouseleave", function () {
        this.style.transform = "translateY(0)";
      });
    });
  });

  function updateActivityTime() {
    // This would typically fetch real data from your API
    console.log(
      "Dashboard activity updated at:",
      new Date().toLocaleTimeString()
    );
  }

  // Handle responsive layout adjustments
  function handleResize() {
    const width = window.innerWidth;
    const mobileActions = document.querySelector(".fixed.bottom-6");

    if (width >= 1280) {
      // xl breakpoint
      mobileActions.classList.add("xl:hidden");
    } else {
      mobileActions.classList.remove("xl:hidden");
    }
  }

  window.addEventListener("resize", handleResize);
  handleResize(); // Call on load
</script>
{% endblock %}
